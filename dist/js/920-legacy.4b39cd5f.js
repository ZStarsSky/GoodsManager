"use strict";(self["webpackChunkmanagerproject"]=self["webpackChunkmanagerproject"]||[]).push([[920],{3920:function(t,a,n){n.r(a),n.d(a,{default:function(){return r}});var o=function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{staticClass:"goodadd"},[n("div",[n("van-nav-bar",{attrs:{title:"增加商品","left-text":"","left-arrow":""},on:{"click-left":t.onClickLeft}})],1),n("div",[n("van-tabs",{model:{value:t.active,callback:function(a){t.active=a},expression:"active"}},[n("van-tab",{attrs:{title:"增加新商品"}},[n("div",[n("van-cell",{attrs:{left:"",title:"商品种类","is-link":"",value:t.goodtype,"arrow-direction":"down"},on:{click:t.showPopup}}),n("van-popup",{style:{height:"50%"},attrs:{position:"bottom"},model:{value:t.show,callback:function(a){t.show=a},expression:"show"}},[n("van-picker",{attrs:{title:"商品种类","show-toolbar":"",columns:t.columns},on:{confirm:t.onConfirm,cancel:t.onCancel}})],1),n("van-field",{staticClass:"inputbox",attrs:{label:"商品号",center:"",placeholder:"请输入商品号"},model:{value:t.addId,callback:function(a){t.addId=a},expression:"addId"}}),n("van-field",{staticClass:"inputbox",attrs:{label:"商品名",placeholder:"请输入商品名"},model:{value:t.addname,callback:function(a){t.addname=a},expression:"addname"}}),n("van-field",{attrs:{type:"number",placeholder:"请输入商品进价",label:"商品进价"},model:{value:t.addinprice,callback:function(a){t.addinprice=a},expression:"addinprice"}}),n("van-field",{attrs:{type:"number",placeholder:"请输入商品售价",label:"商品售价"},model:{value:t.addoutprice,callback:function(a){t.addoutprice=a},expression:"addoutprice"}}),n("van-field",{attrs:{type:"digit",placeholder:"请输入商品数量",label:"商品数量"},model:{value:t.addnum,callback:function(a){t.addnum=a},expression:"addnum"}}),n("van-cell",{attrs:{title:"商品图片"}},[[n("input",{staticClass:"input_image left",attrs:{type:"file",accept:"image/*"},on:{change:function(a){return t.uploadImage(a)}}}),n("img",{staticClass:"show_input_image left",attrs:{src:t.imgSrc}})]],2)],1),n("van-button",{attrs:{type:"primary"},on:{click:t.addgoods}},[t._v("增加"+t._s(t.addId)+"商品数据")])],1),n("van-tab",{attrs:{title:"增加已有商品数量"}},[n("div",[n("van-cell",{attrs:{left:"",title:"商品种类","is-link":"",value:t.goodtype,"arrow-direction":"down"},on:{click:t.showPopup}}),n("van-popup",{style:{height:"50%"},attrs:{position:"bottom"},model:{value:t.show,callback:function(a){t.show=a},expression:"show"}},[n("van-picker",{attrs:{title:"商品种类","show-toolbar":"",columns:t.columns},on:{confirm:t.onConfirm,cancel:t.onCancel}})],1),n("van-field",{staticClass:"inputbox",attrs:{label:"商品号",center:"",placeholder:"请输入商品号"},model:{value:t.addId,callback:function(a){t.addId=a},expression:"addId"}}),n("van-field",{attrs:{type:"digit",placeholder:"请输入商品数量",label:"商品数量"},model:{value:t.addnum,callback:function(a){t.addnum=a},expression:"addnum"}})],1),n("van-button",{attrs:{type:"primary"},on:{click:t.addgoods2}},[t._v("增加"+t._s(t.addId)+"商品数据")])],1)],1)],1)])},e=[],i=n(9515),d={data:function(){return{columns:["饮料","零食","家电","数码","服装","美妆"],idListtype:["Y","L","J","S","F","M"],imgSrc:"",addId:"",addname:"",addinprice:"",addoutprice:"",addpicture:"",addnum:"",show:!1,goodtype:"饮料",username:window.sessionStorage.getItem("username"),fileList:[],active:0}},created:function(){},methods:{uploadImage:function(t){var a=this,n=t.target.files[0],o=new FileReader;o.readAsDataURL(n),o.onload=function(t){var n=t.target;a.imgSrc=n.result,a.addpicture=n.result,console.log("图片长度",a.addpicture.length)}},all:function(){var t=this;this.axios.get("http://127.0.0.1/all").then((function(a){console.log(a.data),t.info=a.data})).catch((function(t){console.log("获取数据失败"+t)}))},add:function(){var t=this;this.axios.get("http://127.0.0.1/list/add",{params:{goodId:this.addId,goodName:this.addname,inprice:this.addinprice,outprice:this.addoutprice,num:this.addnum,picture:this.addpicture}}).then((function(a){t.$toast("添加商品成功"),t.all()})).catch((function(a){t.$toast("添加商品失败"),console.log("获取数据失败"+a)}))},zengjiaaddgoods:function(t){var a=this;this.axios.get("http://127.0.0.1/addgoods/add",{params:{goodId:this.addId,innum:this.addnum,spendmoney:parseInt(this.addnum)*parseFloat(t),intime:String(this.daytime()),username:this.username}}).then((function(t){console.log("添加入库表成功")})).catch((function(t){a.$toast("添加入库失败"),console.log("获取数据失败"+t)}))},daytime:function(){var t=new Date,a=t.getFullYear(),n=t.getMonth()+1,o=t.getDate(),e=a+"/"+n+"/"+o;return e},updatagnum:function(t){var a=this;this.axios.get("http://127.0.0.1/list/updatanum",{params:{goodId:this.addId,num:t}}).then((function(t){console.log(t.data),a.$toast("添加商品库存成功"),a.all()})).catch((function(t){a.$toast("添加商品失败"),console.log("获取数据失败"+t)}))},fangfa1:function(t,a){var n=this;this.axios.get("http://127.0.0.1/list/updatanum",{params:{goodId:this.addId,num:t}}).then((function(t){console.log(t.data),n.$toast("添加商品库存成功"),n.all(),n.zengjiaaddgoods(a)})).catch((function(t){n.$toast("添加商品失败"),console.log("获取数据失败"+t)}))},fangfa2:function(){var t=this;this.axios.get("http://127.0.0.1/list/add",{params:{goodId:this.addId,goodName:this.addname,inprice:this.addinprice,outprice:this.addoutprice,num:this.addnum,picture:this.addpicture}}).then((function(a){console.log(a.data),t.$toast("添加商品成功"),t.all(),t.zengjiaaddgoods(t.addinprice)})).catch((function(a){t.$toast("添加商品失败"),console.log("获取数据失败"+a)}))},addgoods:function(){var t=this;i.Z.confirm({title:"提示",message:"是否确定增加？"}).then((function(){""==t.addId?t.$toast("商品号不能为空"):""==t.addname?t.$toast("商品名不能为空"):""==t.addinprice?t.$toast("商品进价不能为空"):""==t.addoutprice?t.$toast("商品售价不能为空"):""==t.addnum?t.$toast("商品数量不能为空"):t.axios.get("http://127.0.0.1/list/get",{params:{goodId:t.addId}}).then((function(a){console.log("res:",a),console.log(String(a.data).length);var n=String(a.data).length;0==n?t.fangfa2():t.$toast("该商品已存在，请使用右边的增加方法"),console.log("查找成功")})).catch((function(a){t.$toast("添加商品失败"),console.log("获取数据失败"+a)}))})).catch((function(){}))},addgoods2:function(){var t=this;i.Z.confirm({title:"提示",message:"是否确定增加？"}).then((function(){""==t.addId?t.$toast("商品号不能为空"):""==t.addnum?t.$toast("商品数量不能为空"):t.axios.get("http://127.0.0.1/list/get",{params:{goodId:t.addId}}).then((function(a){console.log("res:",a);var n=String(a.data).length;if(0==n)t.$toast("该商品不存在，请使用左边的增加方法");else{console.log("num",a.data[0].num);var o=parseInt(a.data[0].num),e=0;e=o+parseInt(t.addnum);var i=a.data[0].inprice;t.fangfa1(e,i),console.log("查找成功")}})).catch((function(a){t.$toast("添加商品失败"),console.log("获取数据失败"+a)}))})).catch((function(){}))},afterRead:function(t){t.status="uploading",t.message="上传中...",setTimeout((function(){t.status="done",t.message="上传成功"}),1e3)},tishi:function(){i.Z.confirm({title:"提示",message:"是否添加商品数据"}).then((function(){})).catch((function(){}))},onConfirm:function(t,a){this.goodtype=t,this.show=!this.show,this.addId=this.idListtype[a]},onCancel:function(){this.show=!this.show},showPopup:function(){this.show=!0},onClickLeft:function(){this.$router.push({name:"Home"})}}},s=d,c=n(1001),l=(0,c.Z)(s,o,e,!1,null,"7e0bccec",null),r=l.exports}}]);
//# sourceMappingURL=920-legacy.4b39cd5f.js.map