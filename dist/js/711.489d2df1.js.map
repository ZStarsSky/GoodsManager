{"version":3,"file":"js/711.489d2df1.js","mappings":"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","sources":["webpack://managerproject/./src/views/Allstaff.vue?654d","webpack://managerproject/src/views/Allstaff.vue","webpack://managerproject/./src/views/Allstaff.vue?40ea","webpack://managerproject/./src/views/Allstaff.vue","webpack://managerproject/./src/assets/validForm.js"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"allstaff\"},[_c('div',{staticClass:\"topbox\"},[_c('van-nav-bar',{attrs:{\"title\":\"员工信息\",\"left-text\":\"返回\",\"left-arrow\":\"\"},on:{\"click-left\":_vm.onClickLeft}})],1),_c('div',[_c('van-tabs',{model:{value:(_vm.active),callback:function ($$v) {_vm.active=$$v},expression:\"active\"}},[_c('van-tab',{attrs:{\"title\":\"查看员工信息\"},on:{\"click\":_vm.all}},[_c('div',{staticClass:\"allbox\"},_vm._l((_vm.allstafflist),function(item,index){return _c('div',{key:index,staticClass:\"staffbox\",style:(_vm.del==item.username?'display:none':'')},[_c('span',{staticClass:\"text\"},[_vm._v(\"员工用户名\")]),_c('span',{staticClass:\"name\"},[_vm._v(_vm._s(item.username))]),_c('span',{staticClass:\"delimg\",on:{\"click\":function($event){return _vm.delstaff(item.username)}}},[_c('img',{attrs:{\"src\":require(\"../assets/icon/删除.png\"),\"alt\":\"\",\"width\":\"20px\",\"height\":\"20px\"}})])])}),0)]),_c('van-tab',{attrs:{\"title\":\"增加员工信息\"}},[_c('van-field',{staticClass:\"inputbox\",attrs:{\"label\":\"用户名\",\"center\":\"\",\"placeholder\":\"请输入长度大于6位用户名\"},model:{value:(_vm.addusername),callback:function ($$v) {_vm.addusername=$$v},expression:\"addusername\"}}),_c('van-field',{staticClass:\"inputbox\",attrs:{\"label\":\"密码\",\"placeholder\":\"请输入密码\",\"type\":\"password\"},model:{value:(_vm.addpwd),callback:function ($$v) {_vm.addpwd=$$v},expression:\"addpwd\"}}),_c('van-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addstaff}},[_vm._v(\"确认添加\")])],1)],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"allstaff\">\r\n        <div class=\"topbox\">\r\n            <van-nav-bar\r\n            title=\"员工信息\"\r\n            left-text=\"返回\"\r\n            left-arrow\r\n            @click-left=\"onClickLeft\"\r\n            \r\n            />\r\n        </div>\r\n\r\n        <div>\r\n             <van-tabs v-model=\"active\">\r\n                <van-tab title=\"查看员工信息\" @click=\"all\">\r\n                    <div class=\"allbox\">\r\n                        <div v-for=\"(item,index) in allstafflist\" :key=\"index\" class=\"staffbox\" :style=\"del==item.username?'display:none':''\">\r\n                            <span class=\"text\">员工用户名</span>\r\n                            <span class=\"name\">{{item.username}}</span>\r\n                            <span class=\"delimg\" @click=\"delstaff(item.username)\"><img src=\"../assets/icon/删除.png\" alt=\"\" width=\"20px\" height=\"20px\"></span>\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n                </van-tab>\r\n\r\n\r\n                <van-tab title=\"增加员工信息\">\r\n                    <van-field v-model=\"addusername\" label=\"用户名\" center placeholder=\"请输入长度大于6位用户名\" class=\"inputbox\"/>          \r\n                    <van-field v-model=\"addpwd\" label=\"密码\" placeholder=\"请输入密码\" class=\"inputbox\" type=\"password\"/>\r\n\r\n                     <van-button type=\"primary\" @click=\"addstaff\" >确认添加</van-button>\r\n                </van-tab>\r\n             </van-tabs>\r\n        </div>\r\n\r\n        \r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport '../assets/less/allstaff.less'\r\nimport { validForm } from \"../assets/validForm.js\";\r\nimport { Dialog } from 'vant';\r\nexport default {\r\n    data(){\r\n        return{\r\n            allstafflist:[],\r\n            del:'',\r\n            active:0,\r\n            addusername:'',\r\n            addpwd:''\r\n\r\n        \r\n        }\r\n    },\r\n\r\n\r\n    created(){\r\n        this.all()\r\n    \r\n    },\r\n\r\n    methods:{\r\n         onClickLeft(){\r\n            this.$router.go(-1)\r\n        },\r\n\r\n         all() {    //查找全部员工全部数据\r\n            this.axios.get('http://127.0.0.1/allstaff').then(res=>{\r\n                console.log(res.data);\r\n                this.allstafflist = res.data;\r\n            }).catch(err=>{\r\n                console.log(\"获取数据失败\" + err);\r\n            })\r\n        },\r\n\r\n        // 删除员工数据\r\n        delstaff(name){\r\n            \r\n              Dialog.confirm({\r\n                title: '提示',\r\n                message: '是否确定删除？',\r\n                })\r\n                .then(() => {\r\n                    // on confirm\r\n                    this.axios.get('http://127.0.0.1/delstaff',{\r\n                        params: {\r\n                            username: name\r\n                        },\r\n                    }).then(res=>{\r\n                        this.del = name;\r\n                        console.log(name);\r\n                        this.$toast(name+\"已删除成功\")\r\n\r\n                    }).catch(err=>{\r\n                        \r\n                        console.log(\"获取数据失败\" + err);\r\n                    })\r\n                })\r\n                .catch(() => {\r\n                    // on cancel\r\n                });\r\n        },\r\n\r\n        // 增加员工信息\r\n        addstaff(){\r\n             let o = {\r\n                username: {\r\n                value: this.addusername,\r\n                errorMsg: \"用户名不能为空\",\r\n                reg:/^[^\\s]*$/\r\n                // 输入空格提示不能为空\r\n                },\r\n                password: {\r\n                value: this.addpwd,\r\n                errorMsg: \"密码由字母数字下划线组合(4-16字符)\",\r\n                reg: /^[A-Za-z]\\w{3,15}$/\r\n                }\r\n            };\r\n\r\n            let isPass = validForm.valid(o);\r\n\r\n            if (!isPass) {\r\n                // 终止后面的操作\r\n                return;\r\n            }\r\n            if(this.addusername == '') {\r\n                this.$toast('用户名不能为空');\r\n            }else if(this.addpwd == '') {\r\n                this.$toast('密码不能为空');\r\n            }else if(this.addusername.length<=6){\r\n                this.$toast(\"用户名长度要大于6\")\r\n            }\r\n            else{\r\n                this.axios.post('http://127.0.0.1/register',{\r\n                    params: {\r\n                    //这个req的params的goodid要与list.js中的query的数据一致，不然会报错 \r\n                        name:this.addusername,\r\n                        password:this.addpwd,\r\n                    }\r\n                }).then(res=>{\r\n                    if(res.data.status == 200) {\r\n                        this.$toast('增加成功');\r\n                       \r\n                        \r\n                    }else if(res.data.status == 202) {\r\n                        this.$toast('用户名已存在,增加失败')\r\n                        \r\n                        this.addusername = '';\r\n                        this.addpwd= '';\r\n                        console.log(res.data.message);\r\n                    \r\n                        \r\n                    }else{\r\n                        console.log(res.data.message);\r\n                    }\r\n                }).catch(err=>{\r\n                    this.$toast(\"添加失败\")\r\n                    console.log(\"获取数据失败\" + err);\r\n                })\r\n            }\r\n        }\r\n            \r\n    }\r\n}\r\n</script>\r\n\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Allstaff.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Allstaff.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Allstaff.vue?vue&type=template&id=ce5d8e64&\"\nimport script from \"./Allstaff.vue?vue&type=script&lang=js&\"\nexport * from \"./Allstaff.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\r\n\r\n//导入提示组件\r\nimport { Toast } from 'vant'\r\n\r\n//注册提示组件\r\nVue.use(Toast)\r\n\r\n//表单验证模块\r\nclass ValidForm {\r\n\r\n  constructor() {}\r\n\r\n  //验证表单方法\r\n  valid(o) {\r\n    //o: 表单验证数据， object\r\n    // \r\n    // \r\n\r\n    for (let key in o) {\r\n      if (!o[key].reg.test(o[key].value)) {\r\n        \r\n\r\n        //提示错误信息\r\n        Toast(o[key].errorMsg);\r\n        //表单验证不通过\r\n        return false;\r\n      }\r\n    }\r\n\r\n    //表单验证通过\r\n    return true;\r\n  }\r\n\r\n}\r\n\r\n//导出表单验证模块实例\r\nexport const validForm = new ValidForm();"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","onClickLeft","model","value","callback","$$v","active","expression","all","_l","item","index","key","style","del","username","_v","_s","$event","delstaff","addusername","addpwd","addstaff","staticRenderFns","data","allstafflist","created","methods","console","catch","err","Dialog","title","message","then","params","res","errorMsg","reg","password","name","component","Vue","Toast","ValidForm","constructor","valid","o","test","validForm"],"sourceRoot":""}