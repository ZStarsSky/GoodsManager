{"version":3,"file":"js/462-legacy.e49e991b.js","mappings":"uKAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,MAAM,CAACA,EAAG,cAAc,CAACE,MAAM,CAAC,MAAQ,OAAO,YAAY,KAAK,aAAa,IAAIC,GAAG,CAAC,aAAaP,EAAIQ,gBAAgB,GAAGR,EAAIS,GAAIT,EAAc,YAAE,SAASU,EAAKC,GAAO,OAAOP,EAAG,MAAM,CAACQ,IAAID,GAAO,CAACP,EAAG,WAAW,CAACE,MAAM,CAAC,IAAMI,EAAKG,OAAO,MAAQH,EAAKI,UAAU,KAAO,MAAMJ,EAAKK,QAAQ,MAAQL,EAAKM,MAAM,MAAQN,EAAKO,KAAKC,YAAYlB,EAAImB,GAAG,CAAC,CAACP,IAAI,OAAOQ,GAAG,WAAW,MAAO,CAAChB,EAAG,OAAO,CAACiB,YAAY,YAAY,CAACrB,EAAIsB,GAAG,IAAItB,EAAIuB,GAAGb,EAAKc,gBAAgBC,OAAM,IAAO,MAAK,MAAS,MAAKrB,EAAG,iBAAiB,CAACE,MAAM,CAAC,MAAyB,IAAjBN,EAAI0B,aAAiB,cAAc,QAAQnB,GAAG,CAAC,OAASP,EAAI2B,cAAc,IACzrBC,EAAkB,GCyCtB,GACAC,KADA,WAEA,OACAC,QAAAA,KAAAA,OAAAA,MAAAA,QACAC,SAAAA,KAEAC,WAAAA,GAEAN,aAAAA,EAEAO,GAAAA,EAEAC,SAAAA,OAAAA,eAAAA,QAAAA,YAGAC,MAAAA,CACAC,IAAAA,GACApB,MAAAA,GACAD,QAAAA,GACAD,UAAAA,GAGAD,OAAAA,GAEAW,UAAAA,GACAa,OAAAA,GACApB,IAAAA,MAKAqB,QA/BA,WAgCAC,QAAAA,IAAAA,WAAAA,KAAAA,SAGA,sBAMAC,QAAAA,CACAhC,YADA,WAEA,qBAIAiC,cANA,WAOA,uCACAF,QAAAA,IAAAA,KAAAA,QAAAA,GAAAA,GAAAA,MACA,2GAEA,sEACA,iEAMAG,OAlBA,SAkBAC,EAAAC,EAAA/B,EAAAgC,GAAA,WACA,4CACAC,OAAAA,CACAC,OAAAA,KAGAC,MAAA,YACAT,QAAAA,IAAAA,SAAAA,EAAAA,MAEA,yBACA,qBAGA,cAEAA,QAAAA,IAAAA,OAAAA,EAAAA,KAAAA,GAAAA,UACA,iCAEA,kBACA,iBACA,qCACA,oBACA,6BACA,2BAEA,2BAEA,8CAEAA,QAAAA,IAAAA,SAAAA,EAAAA,YAEA,WAEAA,QAAAA,IAAAA,YAEAU,OAAA,YACA,oBACAV,QAAAA,IAAAA,SAAAA,OAQAW,QA/DA,WAgEA,eACA,kBACA,iBACA,cAKA,gBAEA,UAMAvB,UAhFA,WAiFA,6BACA,0BAEA,yCAGA,+GAOA,mBAAAwB,KAAAA,aAOAC,WArGA,SAqGAT,EAAAN,EAAAgB,EAAAC,GAAA,WACA,MACA,WAqCA,OADA,8BACA,KApCA,kDACAR,OAAAA,CACAC,OAAAA,EACAQ,IAAAA,KAEAP,MAAA,YACAT,QAAAA,IAAAA,EAAAA,MACAA,QAAAA,IAAAA,YAGA,4CACAO,OAAAA,CACAC,OAAAA,EAAAA,IACAlC,OAAAA,EAAAA,OACA+B,OAAAA,EAAAA,QACAY,QAAAA,OAAAA,EAAAA,WACAtB,SAAAA,EAAAA,YAEAc,MAAA,YAGA,oBACAT,QAAAA,IAAAA,cAGAU,OAAA,YACA,mBACAV,QAAAA,IAAAA,SAAAA,SAGAU,OAAA,YACA,mBACAV,QAAAA,IAAAA,SAAAA,SC3NwQ,I,UCQpQkB,GAAY,OACd,EACA1D,EACA6B,GACA,EACA,KACA,WACA,MAIF,EAAe6B,EAAiB","sources":["webpack://managerproject/./src/views/GoodoutRight.vue?30bc","webpack://managerproject/src/views/GoodoutRight.vue","webpack://managerproject/./src/views/GoodoutRight.vue?8ea1","webpack://managerproject/./src/views/GoodoutRight.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',[_c('van-nav-bar',{attrs:{\"title\":\"确认出货\",\"left-text\":\"返回\",\"left-arrow\":\"\"},on:{\"click-left\":_vm.onClickLeft}})],1),_vm._l((_vm.Alloutlist),function(item,index){return _c('div',{key:index},[_c('van-card',{attrs:{\"num\":item.outnum,\"price\":item.goutprice,\"desc\":'利润￥'+item.gprofit,\"title\":item.gname,\"thumb\":item.pic},scopedSlots:_vm._u([{key:\"tags\",fn:function(){return [_c('span',{staticClass:\"xiaoshou\"},[_vm._v(\"￥\"+_vm._s(item.sellmoney))])]},proxy:true}],null,true)})],1)}),_c('van-submit-bar',{attrs:{\"price\":_vm.Allsellmoney*100,\"button-text\":\"保存出库\"},on:{\"submit\":_vm.addexgood}})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\r\n<template>\r\n    <div>\r\n        <div>\r\n            <van-nav-bar\r\n            title=\"确认出货\"\r\n            left-text=\"返回\"\r\n            left-arrow\r\n            @click-left=\"onClickLeft\"\r\n            \r\n            />\r\n        </div>\r\n\r\n        <div v-for=\"(item,index) in Alloutlist\" :key=\"index\">\r\n            <van-card\r\n            :num=\"item.outnum\"\r\n            :price=\"item.goutprice\"\r\n            :desc=\"'利润￥'+item.gprofit\"\r\n            :title=\"item.gname\"\r\n            :thumb=\"item.pic\"\r\n            \r\n            >\r\n            <!-- thumb=\"https://img01.yzcdn.cn/vant/ipad.jpeg\" -->\r\n\r\n            <template #tags>\r\n                <span class=\"xiaoshou\">￥{{item.sellmoney}}</span>\r\n                \r\n            </template>\r\n\r\n            </van-card>\r\n        </div>\r\n\r\n        <!-- <button @click=\"getoutlistAll\">444</button> -->\r\n        <!-- <button @click=\"addexgood\">555</button> -->\r\n        <van-submit-bar :price=\"Allsellmoney*100\"  button-text=\"保存出库\" @submit=\"addexgood\" />\r\n\r\n        \r\n        \r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    data() {\r\n        return {\r\n            outlist:this.$route.query.outlist,\r\n            goodname:'雪碧',\r\n\r\n            Alloutlist:[],//全部出库商品\r\n\r\n            Allsellmoney:0,\r\n\r\n            aa:5,\r\n            \r\n            username: window.sessionStorage.getItem('username'),\r\n\r\n\r\n            goods:{\r\n                gid:'',\r\n                gname:'',\r\n                gprofit:'',\r\n                goutprice:'',\r\n                \r\n                // outtime:String(this.daytime()),\r\n                outnum:'',\r\n                \r\n                sellmoney:'',\r\n                oldnum:'',\r\n                pic:'',\r\n            }\r\n        };\r\n            \r\n    },\r\n    created(){\r\n        console.log(\"商品确认出库页面\",this.outlist);\r\n        // console.log(\"username\",this.username, window.sessionStorage.getItem('username'));\r\n        // this.getoutlistAll();\r\n        this.getoutlistAll()\r\n    \r\n\r\n    },\r\n\r\n\r\n    methods: {\r\n        onClickLeft(){\r\n            this.$router.go(-1)\r\n        },\r\n\r\n        // 转化成出库数据\r\n        getoutlistAll(){\r\n            for(var i=0;i<this.outlist.length;i++){\r\n                console.log(this.outlist[i][0],\"id\");\r\n                var gprofit=String((parseFloat(this.outlist[i][2])-parseFloat(this.outlist[i][1]))*parseInt(this.outlist[i][3]))\r\n                // console.log(\"利润\",gprofit);\r\n                var sellallmoney = String(parseFloat(this.outlist[i][2])*parseInt(this.outlist[i][3]))\r\n                this.select(this.outlist[i][0],gprofit,String(this.outlist[i][3]),sellallmoney);\r\n            }\r\n            \r\n        },\r\n\r\n\r\n        select(outid,profit,outnum,sellallmoney) {    //查询操作\r\n            this.axios.get('http://127.0.0.1/list/get',{\r\n                params: {\r\n                    goodId: outid\r\n                },\r\n                \r\n            }).then(res=>{\r\n                 console.log(\"商品查找结果\",res.data);\r\n                //  console.log(\"查询结果length\",String(res.data).length);\r\n                 if(String(res.data).length==0){\r\n                     this.$toast(\"该商品号不存在\")\r\n                 }else{\r\n\r\n                    this.goods.gid=outid;\r\n\r\n                     console.log(\"商品名字\",res.data[0].goodName);\r\n                     this.goods.gname=res.data[0].goodName;\r\n                    //  this.goods.outtime=String(this.daytime());\r\n                     this.goods.gprofit=profit;\r\n                     this.goods.outnum=outnum;\r\n                     this.goods.goutprice=res.data[0].outprice;\r\n                     this.goods.sellmoney = sellallmoney;\r\n                     this.goods.oldnum = res.data[0].num;\r\n                     this.goods.pic = res.data[0].gpic;\r\n\r\n                    this.Alloutlist.push(this.goods);\r\n\r\n                    this.Allsellmoney += parseFloat(this.goods.sellmoney);//计算出库总金额\r\n\r\n                    console.log(\"全部出库商品\",this.Alloutlist);\r\n                    //  this.$toast(\"查询商品成功\")\r\n                    this.goods={}\r\n                    // this.goods.username=this.username\r\n                     console.log(\"查找成功\");\r\n                 }\r\n            }).catch(err=>{\r\n                this.$toast(\"该商品号不存在\")\r\n                console.log(\"获取数据失败\" + err);\r\n            })\r\n        },\r\n\r\n\r\n\r\n\r\n        // 获取当前时间\r\n         daytime(){\r\n            var today=new Date();\r\n            var year = today.getFullYear()//年,月，日，时，分，秒\r\n            var month = today.getMonth()+1 \r\n            var day = today.getDate()   \r\n            // var hour=today.getHours();  \r\n            // var min=today.getMinutes();\r\n            // var sec= today.getSeconds();\r\n\r\n            var s = year+'/'+month+'/'+day;\r\n\r\n            return s\r\n\r\n            // console.log(s)\r\n        },\r\n\r\n        //将所有出库商品出库\r\n        addexgood(){\r\n            if(this.Alloutlist.length==0){\r\n                this.$toast(\"请选择商品\")   \r\n            }else{\r\n                for(var i=0;i<this.Alloutlist.length;i++){\r\n                    // console.log(\"3333\",this.Alloutlist[i]);\r\n                    // this.zengjiaEXgoods(this.Alloutlist[i])!!!\r\n                    this.updatagnum(this.Alloutlist[i].gid,this.Alloutlist[i].oldnum,this.Alloutlist[i].outnum,this.Alloutlist[i]);\r\n                    \r\n                \r\n                }\r\n\r\n                \r\n            }\r\n            this.$router.push({name:'goodout'})\r\n\r\n        },\r\n\r\n       \r\n\r\n        // 修改对应商品的数量\r\n        updatagnum(outid,oldnum,newnum,goodobject){\r\n            var lastnum = oldnum - newnum;\r\n            if(lastnum>=0){\r\n                this.axios.get('http://127.0.0.1/list/updatanum',{\r\n                    params: {\r\n                        goodId: outid,\r\n                        num:lastnum,\r\n                    }\r\n                    }).then(res=>{\r\n                    console.log(res.data);\r\n                    console.log(\"修改商品库存成功\");\r\n                    \r\n\r\n                    this.axios.get('http://127.0.0.1/exgoods/add',{\r\n                        params: {\r\n                            goodId: goodobject.gid,\r\n                            outnum:goodobject.outnum,\r\n                            profit:goodobject.gprofit,\r\n                            outtime:String(this.daytime()),\r\n                            username:this.username,\r\n                        }\r\n                        }).then(res=>{\r\n                        \r\n                            //  console.log(\"出库表res:\",res);\r\n                            this.$toast(\"添加出库表成功\")\r\n                            console.log(\"添加出库表成功\");\r\n                            // this.all()\r\n\r\n                        }).catch(err=>{\r\n                        this.$toast(\"添加出库失败\")\r\n                        console.log(\"获取数据失败\" + err);\r\n                    })\r\n\r\n                }).catch(err=>{\r\n                    this.$toast(\"添加商品失败\")\r\n                    console.log(\"获取数据失败\" + err);\r\n                })\r\n            }else{\r\n                this.$toast(outid+\"商品库存不足，请重新选择\")\r\n                return 'no';\r\n            }\r\n\r\n\r\n        },\r\n\r\n    \r\n\r\n\r\n       \r\n\r\n    },\r\n\r\n\r\n    \r\n\r\n\r\n}\r\n</script>\r\n\r\n\r\n<style scoped>\r\n    .van-card__title{\r\n        margin-left: 27px;\r\n    }\r\n    .van-card__desc, .van-card__title{\r\n        text-align: left;\r\n    }\r\n\r\n    .van-card__bottom{\r\n        text-align: left;\r\n        margin-left: 27px;\r\n    }\r\n\r\n    .xiaoshou{\r\n        margin-right: -172px;\r\n        font-size: 18px;\r\n        text-align: left;\r\n    }\r\n\r\n    .van-card__desc{\r\n        margin-left: 26px;\r\n        margin-top: 8p;\r\n    }\r\n\r\n    .van-submit-bar__bar{\r\n        background: #1d05051a;\r\n        \r\n    }\r\n    .van-submit-bar__button--danger{\r\n        background: linear-gradient(to right,#17de67,#29b98ad4);\r\n\r\n    }\r\n\r\n    .van-submit-bar__price{\r\n        color: #0a11ee;\r\n    }\r\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./GoodoutRight.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./GoodoutRight.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./GoodoutRight.vue?vue&type=template&id=e2a322f2&scoped=true&\"\nimport script from \"./GoodoutRight.vue?vue&type=script&lang=js&\"\nexport * from \"./GoodoutRight.vue?vue&type=script&lang=js&\"\nimport style0 from \"./GoodoutRight.vue?vue&type=style&index=0&id=e2a322f2&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e2a322f2\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","on","onClickLeft","_l","item","index","key","outnum","goutprice","gprofit","gname","pic","scopedSlots","_u","fn","staticClass","_v","_s","sellmoney","proxy","Allsellmoney","addexgood","staticRenderFns","data","outlist","goodname","Alloutlist","aa","username","goods","gid","oldnum","created","console","methods","getoutlistAll","select","outid","profit","sellallmoney","params","goodId","then","catch","daytime","name","updatagnum","newnum","goodobject","num","outtime","component"],"sourceRoot":""}