"use strict";(self["webpackChunkmanagerproject"]=self["webpackChunkmanagerproject"]||[]).push([[846],{6846:function(t,e,i){i.r(e),i.d(e,{default:function(){return d}});var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"goodselect"},[i("div",{staticClass:"goodtitle"},[t._v(" 商品 ")]),i("div",{staticClass:"databox1"},[i("div",{staticClass:"chutext"},[i("span",[t._v("商品列表")]),i("span",{staticClass:"mingxi",on:{click:t.Togoodnum}},[t._v("库存视图")])]),i("div",[i("van-search",{staticClass:"research",attrs:{placeholder:"商品号/名称"},on:{search:function(e){return t.chazhao(t.value,e)}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),i("van-button",{staticClass:"chazhaobtn",attrs:{type:"primary"},on:{click:function(e){return t.chazhao(t.value,e)}}},[t._v("查找")])],1),i("div",[i("van-tree-select",{staticClass:"nametree",attrs:{height:"175vw",items:t.items,"main-active-index":t.active},on:{"update:mainActiveIndex":function(e){t.active=e},"update:main-active-index":function(e){t.active=e}},scopedSlots:t._u([{key:"content",fn:function(){return t._l(t.Alltype,(function(e,s){return i("div",{key:s},[t.active===s?i("div",{attrs:{id:"smallgoodbox"}},t._l(e,(function(e,s){return i("div",{key:s,staticClass:"fbox"},[i("van-swipe-cell",{scopedSlots:t._u([{key:"right",fn:function(){return[i("van-button",{staticClass:"delete1",attrs:{square:"",text:"删除",type:"danger"},on:{click:function(e){return t.delclick(e)}}})]},proxy:!0}],null,!0)},[i("div",{ref:"Agoodbox",refInFor:!0,staticClass:"goodbox",style:e.goodId.indexOf(t.selectokshow)>=0&&""!=t.selectokshow||e.goodName.indexOf(t.selectokshow)>=0&&""!=t.selectokshow?"background:pink":"",on:{click:function(e){return t.changegoods(e)}}},[i("p",{staticClass:"iidd",staticStyle:{display:"none"},attrs:{id:"gid"}},[t._v(t._s(e.goodId))]),i("div",{staticClass:"imgbox"},[i("img",{attrs:{src:e.gpic,alt:"",id:"img"}})]),i("div",{staticClass:"textbox"},[i("div",{staticClass:"goodname"},[t._v(t._s(e.goodName))]),i("div",[i("span",{staticClass:"text"},[t._v("库存量")]),i("span",{staticClass:"num"},[t._v(t._s(e.num))])]),i("div",[i("span",{staticClass:"text"},[t._v("售价")]),i("span",{staticClass:"price"},[t._v("￥"+t._s(e.outprice))])])])])])],1)})),0):t._e()])}))},proxy:!0}])})],1)])])},l=[],n=(i(727),i(6166),i(9515)),o={data(){return{value:"",activeKey:0,active:0,items:[{text:"饮料"},{text:"零食"},{text:"家电"},{text:"数码"},{text:"服装"},{text:"美妆"}],delid:"",name:"",selectokshow:"",Allgoodlist:[],yinliaolist:[],lingshilist:[],jiadianlist:[],shumalist:[],fuzhuanglist:[],meizhuanglist:[],Alltype:[],changegood:{gid:"",gname:"",gnum:"",goutprice:"",gpic:""},selectid:"",selectimg:"",time:1e3}},created(){this.selctalltype()},methods:{Togoodnum(){this.$router.push({name:"goodnum"})},chazhao(t,e){var i=0;if(t.trim().length<=0)this.$toast("请重新输入");else{for(var s=0;s<this.Alltype.length;s++)for(var l=0;l<this.Alltype[s].length;l++)if(this.Alltype[s][l].goodId.indexOf(t)>=0||this.Alltype[s][l].goodName.indexOf(t)>=0){this.active=s,i=1,this.selectokshow=t;break}0==i&&this.$toast("该商品不存在")}},changegoods(t){this.changegood.gid=t.currentTarget.firstElementChild.innerHTML,this.changegood.gname=t.currentTarget.firstElementChild.nextElementSibling.nextElementSibling.firstElementChild.innerHTML,this.changegood.gnum=t.currentTarget.firstElementChild.nextElementSibling.nextElementSibling.firstElementChild.nextElementSibling.firstElementChild.nextElementSibling.innerHTML,this.changegood.goutprice=t.currentTarget.firstElementChild.nextElementSibling.nextElementSibling.firstElementChild.nextElementSibling.nextElementSibling.firstElementChild.nextElementSibling.innerHTML,this.changegood.gpic=t.currentTarget.firstElementChild.nextElementSibling.firstElementChild.src,console.log("修改的商品",this.changegood),this.toGoodupdata(this.changegood)},toGoodupdata(t){this.$router.push({name:"goodupdate",query:{changegood:t}})},delclick(t){console.log("ccc",t.currentTarget.parentElement.parentElement.firstElementChild);var e=t.currentTarget.parentElement.parentElement.firstElementChild;console.log("准备删除的id",t.currentTarget.parentElement.parentElement.firstElementChild.firstElementChild.innerHTML);var i=t.currentTarget.parentElement.parentElement.firstElementChild.firstElementChild.innerHTML;this.del(i,e)},Funchangestyle(t){t.style.display="none"},onClickLeft(){this.$router.go(-1)},selctalltype(){this.axios.get("http://127.0.0.1/all").then((t=>{this.Allgoodlist=t.data;for(var e=0;e<this.Allgoodlist.length;e++)this.Allgoodlist[e]["nownum"]=1;for(e=0;e<this.Allgoodlist.length;e++)"Y"==this.Allgoodlist[e].goodId.charAt(0)?this.yinliaolist.push(this.Allgoodlist[e]):"L"==this.Allgoodlist[e].goodId.charAt(0)?this.lingshilist.push(this.Allgoodlist[e]):"J"==this.Allgoodlist[e].goodId.charAt(0)?this.jiadianlist.push(this.Allgoodlist[e]):"S"==this.Allgoodlist[e].goodId.charAt(0)?this.shumalist.push(this.Allgoodlist[e]):"F"==this.Allgoodlist[e].goodId.charAt(0)?this.fuzhuanglist.push(this.Allgoodlist[e]):"M"==this.Allgoodlist[e].goodId.charAt(0)&&this.meizhuanglist.push(this.Allgoodlist[e]);this.Alltype.push(this.yinliaolist),this.Alltype.push(this.lingshilist),this.Alltype.push(this.jiadianlist),this.Alltype.push(this.shumalist),this.Alltype.push(this.fuzhuanglist),this.Alltype.push(this.meizhuanglist),console.log("分类好的全部商品",this.Alltype)})).catch((t=>{console.log("获取数据失败"+t)}))},all(){this.axios.get("http://127.0.0.1/all").then((t=>{console.log(t.data),this.info=t.data})).catch((t=>{console.log("获取数据失败"+t)}))},del(t,e){n.Z.confirm({title:"提示",message:"是否确定删除？"}).then((()=>{this.axios.get("http://127.0.0.1/list/get",{params:{goodId:t}}).then((i=>{console.log("删除goodid",i.data[0].goodId),this.axios.get("http://127.0.0.1/list/del",{params:{goodId:t}}).then((t=>{this.$toast("删除商品成功"),this.Funchangestyle(e),console.log(t.data)})).catch((t=>{console.log("操作失败"+t)}))})).catch((t=>{this.$toast("删除失败，该商品号不存在"),console.log("获取数据失败"+t)}))})).catch((()=>{}))},select(){this.axios.get("http://127.0.0.1/list/get",{params:{goodId:this.selectid}}).then((t=>{console.log(t.data,"res data -selectend"),console.log("查询结果length",String(t.data).length),0==String(t.data).length?this.$toast("该商品号不存在"):this.$toast("查询商品成功")})).catch((t=>{this.$toast("该商品号不存在"),console.log("获取数据失败"+t)}))}}},a=o,h=i(1001),c=(0,h.Z)(a,s,l,!1,null,"3adb07c1",null),d=c.exports}}]);
//# sourceMappingURL=846.a2e0f18a.js.map