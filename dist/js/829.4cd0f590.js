"use strict";(self["webpackChunkmanagerproject"]=self["webpackChunkmanagerproject"]||[]).push([[829],{5829:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"goodupdate"},[a("div",[a("van-nav-bar",{staticClass:"bar",attrs:{title:"修改商品","left-arrow":""},on:{"click-left":t.onClickLeft}})],1),a("div",[a("van-field",{attrs:{label:"商品号",readonly:""},on:{click:t.nochange},model:{value:t.updategood.gid,callback:function(e){t.$set(t.updategood,"gid",e)},expression:"updategood.gid"}}),a("van-field",{attrs:{label:"商品名",placeholder:"请输入修改商品名"},model:{value:t.updategood.gname,callback:function(e){t.$set(t.updategood,"gname",e)},expression:"updategood.gname"}}),a("van-field",{attrs:{type:"number",label:"商品售价",placeholder:"请输入修改商品售价"},model:{value:t.updategood.goutprice,callback:function(e){t.$set(t.updategood,"goutprice",e)},expression:"updategood.goutprice"}}),a("van-field",{attrs:{type:"digit",label:"商品数量",placeholder:"请输入修改商品数量"},model:{value:t.updategood.gnum,callback:function(e){t.$set(t.updategood,"gnum",e)},expression:"updategood.gnum"}}),a("van-cell",{attrs:{title:"商品图片"}},[[a("input",{staticClass:"input_image left",attrs:{type:"file",accept:"image/*"},on:{change:function(e){return t.uploadImage(e)}}}),a("img",{staticClass:"show_input_image left",attrs:{src:t.imgSrc}})]],2),a("van-button",{attrs:{type:"primary"},on:{click:t.update}},[t._v("修改"+t._s(t.updategood.gid)+"商品数据")])],1)])},i=[],s=a(9515),l={data(){return{updategood:{},imgSrc:this.$route.query.changegood.gpic}},created(){this.updategood=this.$route.query.changegood,console.log("修改商品页面的商品",this.updategood)},methods:{uploadImage(t){let e=t.target.files[0],a=new FileReader;a.readAsDataURL(e),console.log("img:",a),a.onload=({target:t})=>{this.imgSrc=t.result}},nochange(){this.$toast("商品号不能修改")},onClickLeft(){this.$router.go(-1)},all(){this.axios.get("http://127.0.0.1/all").then((t=>{console.log(t.data)})).catch((t=>{console.log("获取数据失败"+t)}))},update(){s.Z.confirm({title:"提示",message:"是否确定修改？"}).then((()=>{""==this.updategood.gname?this.$toast("商品名不能为空"):""==this.updategood.goutprice?this.$toast("商品售价不能为空"):""==this.updategood.gnum?this.$toast("商品数量不能为空"):this.axios.get("http://127.0.0.1/list/update",{params:{goodId:this.updategood.gid,goodName:this.updategood.gname,outprice:this.updategood.goutprice,num:this.updategood.gnum,gpic:this.imgSrc}}).then((t=>{console.log("修改商品成功"),this.$toast("修改商品成功"),this.all(),this.$router.push({name:"goodselect"})})).catch((t=>{this.$toast("修改商品失败"),console.log("获取数据失败"+t)}))})).catch((()=>{}))}}},d=l,g=a(1001),n=(0,g.Z)(d,o,i,!1,null,"e42f9072",null),u=n.exports}}]);
//# sourceMappingURL=829.4cd0f590.js.map