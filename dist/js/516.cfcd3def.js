"use strict";(self["webpackChunkmanagerproject"]=self["webpackChunkmanagerproject"]||[]).push([[516],{1516:function(s,e,t){t.r(e),t.d(e,{default:function(){return c}});var o=function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"login"},[s._m(0),t("div",{staticClass:"inp"},[t("van-field",{staticClass:"nameIn",attrs:{name:"用户名",label:"用户名",placeholder:"用户名"},model:{value:s.userInfo.username,callback:function(e){s.$set(s.userInfo,"username",e)},expression:"userInfo.username"}}),t("van-field",{staticClass:"passwdIn",attrs:{type:s.showPassword?"password":"text",name:"密码",label:"密码",placeholder:"密码","right-icon":s.showPassword?"closed-eye":"eye-o"},on:{"click-right-icon":function(e){s.showPassword=!s.showPassword}},model:{value:s.userInfo.password,callback:function(e){s.$set(s.userInfo,"password",e)},expression:"userInfo.password"}}),t("div",{staticClass:"wj",on:{click:s.changepassword}},[s._v("忘记密码")]),t("div",{staticClass:"loginbtn"},[t("van-button",{attrs:{block:"",type:"info","native-type":"submit",color:"rgb(53, 155, 177)"},on:{click:s.login}},[s._v("登陆")])],1),t("div",{staticClass:"registerbtn"},[t("van-button",{staticStyle:{background:"white",color:"black",border:"1px solid gray"},attrs:{color:"rgb(53, 155, 177)",block:"",type:"info","native-type":"submit"},on:{click:s.showPopup}},[s._v("注册")])],1)],1),t("van-popup",{style:{height:"50%"},attrs:{position:"bottom",closeable:""},model:{value:s.show,callback:function(e){s.show=e},expression:"show"}},[t("div",{staticClass:"register-box"},[t("h1",[s._v("注册")]),t("div",{staticClass:"register"},[t("van-field",{attrs:{name:"用户名",label:"用户名",placeholder:"用户名"},model:{value:s.registerInfo.username,callback:function(e){s.$set(s.registerInfo,"username",e)},expression:"registerInfo.username"}}),t("van-field",{attrs:{type:s.showPassword1?"password":"text",name:"密码",label:"密码",placeholder:"密码","right-icon":s.showPassword1?"closed-eye":"eye-o"},on:{"click-right-icon":function(e){s.showPassword1=!s.showPassword1}},model:{value:s.registerInfo.password,callback:function(e){s.$set(s.registerInfo,"password",e)},expression:"registerInfo.password"}}),t("div",{staticStyle:{margin:"16px","margin-top":"25px"}},[t("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"},on:{click:s.register}},[s._v("注册")])],1)],1)])])],1)},a=[function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"nav-top"},[t("div",{staticClass:"nav-left"},[t("span",[s._v("商 品 库 存 管 理 系 统")])])])}],r=t(188),n={data(){return{value:"",userInfo:{username:"aa",password:"a4567"},registerInfo:{username:"bb",password:"b123"},showPassword:!0,showPassword1:!0,show:!1}},created(){},methods:{onSubmit(s){console.log("submit",s)},showPopup(){this.show=!0},changepassword(){this.$router.push({name:"changepassword"})},login(){let s={username:{value:this.userInfo.username,errorMsg:"用户名不能为空",reg:/^[^\s]*$/},password:{value:this.userInfo.password,errorMsg:"密码由数字字母下划线组合(4-16字符)",reg:/^[A-Za-z]\w{3,15}$/}},e=r.$.valid(s);e&&(""==this.userInfo.username?this.$toast("用户名不能为空"):""==this.userInfo.password?this.$toast("密码不能为空"):this.axios.get("http://127.0.0.1/login",{params:{name:this.userInfo.username,password:this.userInfo.password}}).then((s=>{console.log(s),200==s.data.status?(window.sessionStorage.setItem("token","loginok"),this.tohome(this.userInfo.username)):this.$toast("用户名或密码错误,登陆失败")})).catch((s=>{console.log("登录失败"+s)})))},tohome(s){console.log(s),window.sessionStorage.setItem("username",this.userInfo.username),this.$router.push({name:"Home",query:{username:s}})},register(){let s={username:{value:this.registerInfo.username,errorMsg:"用户名不能为空",reg:/^[^\s]*$/},password:{value:this.registerInfo.password,errorMsg:"密码由字母数字下划线组合(4-16字符)",reg:/^[A-Za-z]\w{3,15}$/}},e=r.$.valid(s);e&&(""==this.registerInfo.username?this.$toast("用户名不能为空"):""==this.registerInfo.password?this.$toast("密码不能为空"):this.axios.post("http://127.0.0.1/register",{params:{name:this.registerInfo.username,password:this.registerInfo.password}}).then((s=>{console.log(s),200==s.data.status?(this.$toast("注册成功"),this.show=!this.show):202==s.data.status?(this.$toast("用户名已存在,注册失败"),this.registerInfo.username="",this.registerInfo.password="",console.log(s.data.message)):console.log(s.data.message)})).catch((s=>{console.log("操作失败"+s)})))}}},i=n,l=t(1001),u=(0,l.Z)(i,o,a,!1,null,"1754fe4d",null),c=u.exports},188:function(s,e,t){t.d(e,{$:function(){return n}});var o=t(8935),a=t(8256);o.Z.use(a.Z);class r{constructor(){}valid(s){for(let e in s)if(!s[e].reg.test(s[e].value))return(0,a.Z)(s[e].errorMsg),!1;return!0}}const n=new r}}]);
//# sourceMappingURL=516.cfcd3def.js.map