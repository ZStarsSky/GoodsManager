"use strict";(self["webpackChunkmanagerproject"]=self["webpackChunkmanagerproject"]||[]).push([[155],{7155:function(t,s,i){i.r(s),i.d(s,{default:function(){return c}});var e=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"gooddata"},[i("div",{staticClass:"goodtitle"},[t._v(" 报表 ")]),i("div",{staticClass:"databox1"},[i("div",{staticClass:"chutext"},[i("span",[t._v("出入库情况")]),i("span",{staticClass:"mingxi",on:{click:t.TogoodInOut}},[t._v("明细")])]),i("div",{staticClass:"box2"},[i("span",{staticClass:"moneybox"},[i("div",{staticClass:"text"},[t._v("出库总利润")]),i("span",{staticClass:"yuan"},[t._v("￥")]),i("span",{staticClass:"outmoneyText",style:String(t.username).length<=6?"":"font-size:11px"},[t._v(t._s(t.Outmoney))])]),i("span",{staticClass:"numbox"},[i("div",{staticClass:"text"},[t._v("出库总数")]),i("div",{staticClass:"num"},[t._v(t._s(t.Outnum))])])]),i("div",{staticClass:"box3"},[i("span",{staticClass:"moneybox"},[i("div",{staticClass:"text"},[t._v("入库总花费")]),i("div",{staticClass:"money"},[t._v("￥"+t._s(t.Inmoney))])]),i("span",{staticClass:"numbox"},[i("div",{staticClass:"text"},[t._v("入库总数")]),i("div",{staticClass:"num"},[t._v(t._s(t.Innum))])])]),i("span",{staticClass:"shanxingTitle"},[t._v("出库数量排名前五的商品")]),i("van-button",{staticClass:"shanxing",attrs:{plain:"",type:"info"},on:{click:t.clickshowshanxing}},[t._v("扇形图")]),i("div",{attrs:{id:"myChart"}}),i("van-button",{staticClass:"zhexiang",attrs:{plain:"",type:"info"},on:{click:t.zhexianall}},[t._v("折线图")]),t._m(0)],1)])},a=[function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"datapic"},[i("div",{staticClass:"datapic2"},[i("div",{staticStyle:{width:"90%",height:"70vh"},attrs:{id:"chartLineBox2"}})]),i("div",{staticClass:"datapic2"},[i("div",{staticStyle:{width:"90%",height:"70vh"},attrs:{id:"chartLineBox"}})])])}],l=i(727),o={data(){return{Allspendtimelist:[],Alloutlist:[],addtimelist:[],addspendlist:[],Inmoney:0,Innum:"",addnumlist:[],outprofitlist:[],Outmoney:0,Outnum:"",outnumlist:[],poplist:[],numlist:[],idlist:[],namelist:[],name:"",NNamelist:[],index:0,Allpopgood:[],echartsOption:{legend:{data:[]},tooltip:{trigger:"axis"},series:[{name:"公司市值占比",type:"pie",radius:"50%",center:["50%","50%"],data:[]}]},username:window.sessionStorage.getItem("username")}},created(){String(this.username).length<=6?(this.allspend(),this.allprofit()):(this.Outmoney="您没有权限查看",this.allspend()),this.selectaddgood(),this.selectexgood(),this.selectidnum()},methods:{Show(){console.log("最受欢迎",this.Allpopgood)},allspend(){this.axios.get("http://127.0.0.1/addgoods/allspend").then((t=>{console.log("入库花费总额",t.data[0].spendall),this.Inmoney=t.data[0].spendall})).catch((t=>{console.log("获取数据失败"+t)}))},allprofit(){this.axios.get("http://127.0.0.1/exgoods/allprofit").then((t=>{console.log("出库利润总额",t.data[0].profitall),this.Outmoney=t.data[0].profitall})).catch((t=>{console.log("获取数据失败"+t)}))},TogoodInOut(){this.$router.push({name:"goodInOut"})},selectname(t){this.axios.get("http://127.0.0.1/list/selectname",{params:{goodId:t}}).then((t=>{this.NNamelist[this.index]=t.data[0].goodName,this.index++})).catch((t=>{console.log("获取数据失败"+t)}))},sortlist(t){return function(s,i){return i[t]-s[t]}},selectidnum(){this.axios.get("http://127.0.0.1/exgoods/allid",{}).then((t=>{this.idlist=t.data,console.log("iiiddd",t.data);for(var s=0;s<this.idlist.length;s++)this.selectname(this.idlist[s].goodId),this.selectOutnumgood(this.idlist[s].goodId);console.log("名字",this.NNamelist)})).catch((t=>{console.log("获取数据失败"+t)}))},selectOutnumgood(t){this.axios.get("http://127.0.0.1/exgoods/selectoutGood",{params:{goodId:t}}).then((t=>{this.numlist.push(t.data[0].goutnum)})).catch((t=>{console.log("获取数据失败"+t)}))},clickshowshanxing(){console.log("名字list",this.NNamelist);for(var t=0;t<this.numlist.length;t++)this.Allpopgood.push({name:this.NNamelist[t],value:this.numlist[t],id:this.idlist[t]});this.Allpopgood=this.Allpopgood.sort(this.sortlist("value")),this.echartsOption.series[0].data=this.Allpopgood.splice(0,7);var s=this.Allpopgood.splice(0,7).name;this.echartsOption.legend.data=s;let i=l.S1(document.getElementById("myChart"),"light");i.setOption(this.echartsOption)},selectaddgood(){this.axios.get("http://127.0.0.1/addgoods/selectspend",{}).then((t=>{this.Allspendaddtimelist=Object.freeze(t.data),console.log("入库表的时间和花费金额和数量",this.Allspendaddtimelist),this.addtimelist=this.Allspendaddtimelist[1],this.addspendlist=this.Allspendaddtimelist[0],this.addnumlist=this.Allspendaddtimelist[2],this.axios.get("http://127.0.0.1/addgoods/alladdnum",{}).then((t=>{this.Innum=t.data,console.log("入库总数",this.Innum)})).catch((t=>{console.log("获取数据失败"+t)}))})).catch((t=>{console.log("获取数据失败"+t)}))},MoneyFun(t){for(var s=0,i=0;i<t.length;i++)s+=t[i];return s},selectexgood(){this.axios.get("http://127.0.0.1/exgoods/selectprofit",{}).then((t=>{this.Alloutlist=Object.freeze(t.data),console.log("出库表的时间和花费金额和数量",this.Alloutlist),this.outprofitlist=this.Alloutlist[0],console.log("出库金额",this.outprofitlist),this.outnumlist=this.Alloutlist[2],this.axios.get("http://127.0.0.1/exgoods/alloutnum",{}).then((t=>{this.Outnum=t.data,console.log("出库总数",this.Outnum)})).catch((t=>{console.log("获取数据失败"+t)}))})).catch((t=>{console.log("获取数据失败"+t)}))},zhexianall(){this.username.length<=6?(this.zhexian(),this.zhexian2()):this.zhexian2()},zhexian(){this.chartLine=l.S1(document.getElementById("chartLineBox"));var t={tooltip:{trigger:"axis"},legend:{data:["出库利润金额","入库花费金额"]},color:["#8AE09F","#FA6F53"],xAxis:{type:"category",boundaryGap:!1,data:this.addtimelist,name:"时间",nameTextStyle:{color:"#FA6F53",fontSize:12,padding:[10,0,0,-20]},axisLine:{lineStyle:{color:"#FA6F53"}}},yAxis:{name:"出入库金额 /千",nameTextStyle:{color:"#FA6F53",fontSize:12,padding:[10,10,5,35]},axisLine:{lineStyle:{color:"#FA6F53",margin:[10,5,10,10]}},type:"value"},series:[{name:"出库利润金额",data:this.outprofitlist,type:"line",lineStyle:{normal:{color:"#8AE09F"}}},{name:"入库花费金额",data:this.addspendlist,type:"line",lineStyle:{normal:{color:"#FA6F53"}}}]};this.chartLine.setOption(t)},zhexian2(){this.chartLine=l.S1(document.getElementById("chartLineBox2"));var t={tooltip:{trigger:"axis"},legend:{data:["出库数量","入库数量"]},color:["#8AE09F","#FA6F53"],xAxis:{type:"category",boundaryGap:!1,data:this.addtimelist,name:"时间",nameTextStyle:{color:"#FA6F53",fontSize:12,padding:[10,0,0,-20]},axisLine:{lineStyle:{color:"#FA6F53"}}},yAxis:{name:"出入库数量",nameTextStyle:{color:"#FA6F53",fontSize:12,padding:[10,10,5,35]},axisLine:{lineStyle:{color:"#FA6F53",margin:[10,5,10,10]}},type:"value"},series:[{name:"出库数量",data:this.outnumlist,type:"line",lineStyle:{normal:{color:"#8AE09F"}}},{name:"入库数量",data:this.addnumlist,type:"line",lineStyle:{normal:{color:"#FA6F53"}}}]};this.chartLine.setOption(t)}},mounted(){l.S1(document.getElementById("myChart"),"light")}},n=o,d=i(1001),h=(0,d.Z)(n,e,a,!1,null,null,null),c=h.exports}}]);
//# sourceMappingURL=155.1c6b9dc0.js.map