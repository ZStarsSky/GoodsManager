"use strict";(self["webpackChunkmanagerproject"]=self["webpackChunkmanagerproject"]||[]).push([[829],{5829:function(t,e,o){o.r(e),o.d(e,{default:function(){return g}});var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"goodupdate"},[o("div",[o("van-nav-bar",{staticClass:"bar",attrs:{title:"修改商品","left-arrow":""},on:{"click-left":t.onClickLeft}})],1),o("div",[o("van-field",{attrs:{label:"商品号",readonly:""},on:{click:t.nochange},model:{value:t.updategood.gid,callback:function(e){t.$set(t.updategood,"gid",e)},expression:"updategood.gid"}}),o("van-field",{attrs:{label:"商品名",placeholder:"请输入修改商品名"},model:{value:t.updategood.gname,callback:function(e){t.$set(t.updategood,"gname",e)},expression:"updategood.gname"}}),o("van-field",{attrs:{type:"number",label:"商品售价",placeholder:"请输入修改商品售价"},model:{value:t.updategood.goutprice,callback:function(e){t.$set(t.updategood,"goutprice",e)},expression:"updategood.goutprice"}}),o("van-field",{attrs:{type:"digit",label:"商品数量",placeholder:"请输入修改商品数量"},model:{value:t.updategood.gnum,callback:function(e){t.$set(t.updategood,"gnum",e)},expression:"updategood.gnum"}}),o("van-cell",{attrs:{title:"商品图片"}},[[o("input",{staticClass:"input_image left",attrs:{type:"file",accept:"image/*"},on:{change:function(e){return t.uploadImage(e)}}}),o("img",{staticClass:"show_input_image left",attrs:{src:t.imgSrc}})]],2),o("van-button",{attrs:{type:"primary"},on:{click:t.update}},[t._v("修改"+t._s(t.updategood.gid)+"商品数据")])],1)])},n=[],i=o(9515),u={data:function(){return{updategood:{},imgSrc:this.$route.query.changegood.gpic}},created:function(){this.updategood=this.$route.query.changegood,console.log("修改商品页面的商品",this.updategood)},methods:{uploadImage:function(t){var e=this,o=t.target.files[0],a=new FileReader;a.readAsDataURL(o),console.log("img:",a),a.onload=function(t){var o=t.target;e.imgSrc=o.result}},nochange:function(){this.$toast("商品号不能修改")},onClickLeft:function(){this.$router.go(-1)},all:function(){this.axios.get("http://127.0.0.1/all").then((function(t){console.log(t.data)})).catch((function(t){console.log("获取数据失败"+t)}))},update:function(){var t=this;i.Z.confirm({title:"提示",message:"是否确定修改？"}).then((function(){""==t.updategood.gname?t.$toast("商品名不能为空"):""==t.updategood.goutprice?t.$toast("商品售价不能为空"):""==t.updategood.gnum?t.$toast("商品数量不能为空"):t.axios.get("http://127.0.0.1/list/update",{params:{goodId:t.updategood.gid,goodName:t.updategood.gname,outprice:t.updategood.goutprice,num:t.updategood.gnum,gpic:t.imgSrc}}).then((function(e){console.log("修改商品成功"),t.$toast("修改商品成功"),t.all(),t.$router.push({name:"goodselect"})})).catch((function(e){t.$toast("修改商品失败"),console.log("获取数据失败"+e)}))})).catch((function(){}))}}},d=u,l=o(1001),c=(0,l.Z)(d,a,n,!1,null,"e42f9072",null),g=c.exports}}]);
//# sourceMappingURL=829-legacy.fa038b08.js.map