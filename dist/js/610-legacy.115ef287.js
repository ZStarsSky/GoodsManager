"use strict";(self["webpackChunkmanagerproject"]=self["webpackChunkmanagerproject"]||[]).push([[610],{9610:function(t,l,i){i.r(l),i.d(l,{default:function(){return h}});var s=function(){var t=this,l=t.$createElement,i=t._self._c||l;return i("div",{staticClass:"goodselect"},[i("div",[i("van-nav-bar",{staticClass:"bar",attrs:{title:"商品出库","left-arrow":""},on:{"click-left":t.onClickLeft}})],1),i("div",[i("van-search",{staticClass:"research",attrs:{placeholder:"商品号/名称"},on:{search:function(l){return t.chazhao(t.value,l)}},model:{value:t.value,callback:function(l){t.value=l},expression:"value"}}),i("van-button",{staticClass:"chazhaobtn",attrs:{type:"primary"},on:{click:function(l){return t.chazhao(t.value,l)}}},[t._v("查找")])],1),i("div",[i("van-tree-select",{staticClass:"nametree",attrs:{height:"175vw",items:t.items,"main-active-index":t.active},on:{"update:mainActiveIndex":function(l){t.active=l},"update:main-active-index":function(l){t.active=l}},scopedSlots:t._u([{key:"content",fn:function(){return t._l(t.Alltype,(function(l,s){return i("div",{key:s},[t.active===s?i("div",t._l(l,(function(l,s){return i("div",{key:s,staticClass:"fbox"},[i("van-swipe-cell",[i("div",{staticClass:"goodbox",style:l.goodId.indexOf(t.selectokshow)>=0&&""!=t.selectokshow||l.goodName.indexOf(t.selectokshow)>=0&&""!=t.selectokshow?"background:pink":""},[i("p",{staticClass:"iidd",staticStyle:{display:"none"}},[t._v(t._s(l.goodId))]),i("div",{staticClass:"imgbox"},[i("img",{attrs:{src:l.gpic,alt:""}})]),i("div",{staticClass:"textbox"},[i("div",{staticClass:"goodname"},[t._v(t._s(l.goodName))]),i("div",[i("span",{staticClass:"text"},[t._v("库存量")]),i("span",{staticClass:"num"},[t._v(t._s(l.num))])]),i("div",[i("span",{staticClass:"text"},[t._v("售价")]),i("span",{staticClass:"price"},[t._v("￥"+t._s(l.outprice))])])])]),i("div",{staticClass:"showbtn",on:{click:function(i){return t.clickshow(l.outdata,i)}}},[i("van-button",{staticClass:"selectbtn",attrs:{plain:"",hairline:"",type:"primary"}},[t._v("选择")])],1),i("div",{staticClass:"outcbtn",on:{click:function(i){return t.clicknum(l.nownum,i)}}},[i("van-stepper",{model:{value:l.nownum,callback:function(i){t.$set(l,"nownum",i)},expression:"gooditem.nownum"}})],1)])],1)})),0):t._e()])}))},proxy:!0}])})],1),i("div",[i("van-goods-action",[i("van-goods-action-button",{attrs:{type:"danger",text:"选好了"},on:{click:t.shuchu}})],1)],1)])},o=[],e=i(9515),n={data:function(){return{value:"",activeKey:0,active:0,items:[{text:"饮料"},{text:"零食"},{text:"家电"},{text:"数码"},{text:"服装"},{text:"美妆"}],name:"",Allgoodlist:[],yinliaolist:[],lingshilist:[],jiadianlist:[],shumalist:[],fuzhuanglist:[],meizhuanglist:[],Alltype:[],selectid:"",selectimg:"",showdata:0,outlist:[],outnumlist:[],Alloutlist:[],allclicknum:0,selectokshow:""}},created:function(){this.selctalltype()},methods:{chazhao:function(t,l){for(var i=0,s=0;s<this.Alltype.length;s++)for(var o=0;o<this.Alltype[s].length;o++)if(this.Alltype[s][o].goodId.indexOf(t)>=0||this.Alltype[s][o].goodName.indexOf(t)>=0){this.active=s,i=1,this.selectokshow=t,console.log(this.selectokshow);break}0==i&&this.$toast("该商品不存在")},shuchu:function(){for(var t=this,l=0;l<this.outlist.length;l++)this.selectIdnum(this.outlist[l]);console.log("id和num的list",this.outnumlist);for(var i=0;i<this.outnumlist.length;i++)this.getmoney(this.outnumlist[i][0],this.outnumlist[i][1]);console.log("出库的商品列表:id,进价，售价，出库数量",this.Alloutlist),e.Z.confirm({title:"提示",message:"是否确定出库？"}).then((function(){t.toGoodoutRight(t.Alloutlist)})).catch((function(){console.log("取消出库")}))},toGoodoutRight:function(t){console.log("跳转和出库列表",t),this.$router.push({name:"goodoutRight",query:{outlist:t}})},checklistid:function(t,l){for(var i=0;i<t.length;i++)return-1==t[i].indexOf(String(l))?-1:i},selectIdnum:function(t){console.log(t);for(var l=0;l<this.Alltype.length;l++)for(var i=0;i<this.Alltype[l].length;i++)(this.Alltype[l][i].goodId==t&&0==this.outnumlist.length||this.Alltype[l][i].goodId==t&&-1==this.checklistid(this.outnumlist,t))&&this.outnumlist.push([this.Alltype[l][i].goodId,this.Alltype[l][i].nownum])},getmoney:function(t,l){var i=this;this.axios.get("http://127.0.0.1/list/getmoney",{params:{goodId:t}}).then((function(s){var o=s.data[0].inprice,e=s.data[0].outprice;if(console.log("商品id和售价和进价",t,o,e),0==i.Alloutlist.length)i.Alloutlist.push([t,o,e,l]);else{var n=i.checklistid(i.Alloutlist,t);-1==n&&i.Alloutlist.push([t,o,e,l])}})).catch((function(t){console.log("获取数据失败"+t)}))},clicknum:function(t,l){1},clickshow:function(t,l){l.currentTarget.nextElementSibling.className="showw",l.currentTarget.className="noshoww";var i=l.currentTarget.parentElement.firstElementChild.firstElementChild.innerHTML;this.outlist.push(i),console.log("即将出库商品id列表",this.outlist)},onClickIcon:function(){this.$toast("点击图标")},onClickButton:function(){this.$toast("点击按钮")},onClickLeft:function(){this.$router.push({name:"Home"})},selctalltype:function(){var t=this;this.axios.get("http://127.0.0.1/all").then((function(l){t.Allgoodlist=l.data;for(var i=0;i<t.Allgoodlist.length;i++)t.Allgoodlist[i]["nownum"]=1,t.Allgoodlist[i]["outdata"]=0;for(i=0;i<t.Allgoodlist.length;i++)"Y"==t.Allgoodlist[i].goodId.charAt(0)?t.yinliaolist.push(t.Allgoodlist[i]):"L"==t.Allgoodlist[i].goodId.charAt(0)?t.lingshilist.push(t.Allgoodlist[i]):"J"==t.Allgoodlist[i].goodId.charAt(0)?t.jiadianlist.push(t.Allgoodlist[i]):"S"==t.Allgoodlist[i].goodId.charAt(0)?t.shumalist.push(t.Allgoodlist[i]):"F"==t.Allgoodlist[i].goodId.charAt(0)?t.fuzhuanglist.push(t.Allgoodlist[i]):"M"==t.Allgoodlist[i].goodId.charAt(0)&&t.meizhuanglist.push(t.Allgoodlist[i]);t.Alltype.push(t.yinliaolist),t.Alltype.push(t.lingshilist),t.Alltype.push(t.jiadianlist),t.Alltype.push(t.shumalist),t.Alltype.push(t.fuzhuanglist),t.Alltype.push(t.meizhuanglist),console.log("出库页面：分类好的全部商品",t.Alltype)})).catch((function(t){console.log("获取数据失败"+t)}))}}},a=n,c=i(1001),u=(0,c.Z)(a,s,o,!1,null,"e19030ac",null),h=u.exports}}]);
//# sourceMappingURL=610-legacy.115ef287.js.map