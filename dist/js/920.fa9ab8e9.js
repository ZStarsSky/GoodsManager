"use strict";(self["webpackChunkmanagerproject"]=self["webpackChunkmanagerproject"]||[]).push([[920],{3920:function(t,a,e){e.r(a),e.d(a,{default:function(){return r}});var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"goodadd"},[e("div",[e("van-nav-bar",{attrs:{title:"增加商品","left-text":"","left-arrow":""},on:{"click-left":t.onClickLeft}})],1),e("div",[e("van-tabs",{model:{value:t.active,callback:function(a){t.active=a},expression:"active"}},[e("van-tab",{attrs:{title:"增加新商品"}},[e("div",[e("van-cell",{attrs:{left:"",title:"商品种类","is-link":"",value:t.goodtype,"arrow-direction":"down"},on:{click:t.showPopup}}),e("van-popup",{style:{height:"50%"},attrs:{position:"bottom"},model:{value:t.show,callback:function(a){t.show=a},expression:"show"}},[e("van-picker",{attrs:{title:"商品种类","show-toolbar":"",columns:t.columns},on:{confirm:t.onConfirm,cancel:t.onCancel}})],1),e("van-field",{staticClass:"inputbox",attrs:{label:"商品号",center:"",placeholder:"请输入商品号"},model:{value:t.addId,callback:function(a){t.addId=a},expression:"addId"}}),e("van-field",{staticClass:"inputbox",attrs:{label:"商品名",placeholder:"请输入商品名"},model:{value:t.addname,callback:function(a){t.addname=a},expression:"addname"}}),e("van-field",{attrs:{type:"number",placeholder:"请输入商品进价",label:"商品进价"},model:{value:t.addinprice,callback:function(a){t.addinprice=a},expression:"addinprice"}}),e("van-field",{attrs:{type:"number",placeholder:"请输入商品售价",label:"商品售价"},model:{value:t.addoutprice,callback:function(a){t.addoutprice=a},expression:"addoutprice"}}),e("van-field",{attrs:{type:"digit",placeholder:"请输入商品数量",label:"商品数量"},model:{value:t.addnum,callback:function(a){t.addnum=a},expression:"addnum"}}),e("van-cell",{attrs:{title:"商品图片"}},[[e("input",{staticClass:"input_image left",attrs:{type:"file",accept:"image/*"},on:{change:function(a){return t.uploadImage(a)}}}),e("img",{staticClass:"show_input_image left",attrs:{src:t.imgSrc}})]],2)],1),e("van-button",{attrs:{type:"primary"},on:{click:t.addgoods}},[t._v("增加"+t._s(t.addId)+"商品数据")])],1),e("van-tab",{attrs:{title:"增加已有商品数量"}},[e("div",[e("van-cell",{attrs:{left:"",title:"商品种类","is-link":"",value:t.goodtype,"arrow-direction":"down"},on:{click:t.showPopup}}),e("van-popup",{style:{height:"50%"},attrs:{position:"bottom"},model:{value:t.show,callback:function(a){t.show=a},expression:"show"}},[e("van-picker",{attrs:{title:"商品种类","show-toolbar":"",columns:t.columns},on:{confirm:t.onConfirm,cancel:t.onCancel}})],1),e("van-field",{staticClass:"inputbox",attrs:{label:"商品号",center:"",placeholder:"请输入商品号"},model:{value:t.addId,callback:function(a){t.addId=a},expression:"addId"}}),e("van-field",{attrs:{type:"digit",placeholder:"请输入商品数量",label:"商品数量"},model:{value:t.addnum,callback:function(a){t.addnum=a},expression:"addnum"}})],1),e("van-button",{attrs:{type:"primary"},on:{click:t.addgoods2}},[t._v("增加"+t._s(t.addId)+"商品数据")])],1)],1)],1)])},o=[],i=e(9515),d={data(){return{columns:["饮料","零食","家电","数码","服装","美妆"],idListtype:["Y","L","J","S","F","M"],imgSrc:"",addId:"",addname:"",addinprice:"",addoutprice:"",addpicture:"",addnum:"",show:!1,goodtype:"饮料",username:window.sessionStorage.getItem("username"),fileList:[],active:0}},created(){},methods:{uploadImage(t){let a=t.target.files[0],e=new FileReader;e.readAsDataURL(a),e.onload=({target:t})=>{this.imgSrc=t.result,this.addpicture=t.result,console.log("图片长度",this.addpicture.length)}},all(){this.axios.get("http://127.0.0.1/all").then((t=>{console.log(t.data),this.info=t.data})).catch((t=>{console.log("获取数据失败"+t)}))},add(){this.axios.get("http://127.0.0.1/list/add",{params:{goodId:this.addId,goodName:this.addname,inprice:this.addinprice,outprice:this.addoutprice,num:this.addnum,picture:this.addpicture}}).then((t=>{this.$toast("添加商品成功"),this.all()})).catch((t=>{this.$toast("添加商品失败"),console.log("获取数据失败"+t)}))},zengjiaaddgoods(t){this.axios.get("http://127.0.0.1/addgoods/add",{params:{goodId:this.addId,innum:this.addnum,spendmoney:parseInt(this.addnum)*parseFloat(t),intime:String(this.daytime()),username:this.username}}).then((t=>{console.log("添加入库表成功")})).catch((t=>{this.$toast("添加入库失败"),console.log("获取数据失败"+t)}))},daytime(){var t=new Date,a=t.getFullYear(),e=t.getMonth()+1,s=t.getDate(),o=a+"/"+e+"/"+s;return o},updatagnum(t){this.axios.get("http://127.0.0.1/list/updatanum",{params:{goodId:this.addId,num:t}}).then((t=>{console.log(t.data),this.$toast("添加商品库存成功"),this.all()})).catch((t=>{this.$toast("添加商品失败"),console.log("获取数据失败"+t)}))},fangfa1(t,a){this.axios.get("http://127.0.0.1/list/updatanum",{params:{goodId:this.addId,num:t}}).then((t=>{console.log(t.data),this.$toast("添加商品库存成功"),this.all(),this.zengjiaaddgoods(a)})).catch((t=>{this.$toast("添加商品失败"),console.log("获取数据失败"+t)}))},fangfa2(){this.axios.get("http://127.0.0.1/list/add",{params:{goodId:this.addId,goodName:this.addname,inprice:this.addinprice,outprice:this.addoutprice,num:this.addnum,picture:this.addpicture}}).then((t=>{console.log(t.data),this.$toast("添加商品成功"),this.all(),this.zengjiaaddgoods(this.addinprice)})).catch((t=>{this.$toast("添加商品失败"),console.log("获取数据失败"+t)}))},addgoods(){i.Z.confirm({title:"提示",message:"是否确定增加？"}).then((()=>{""==this.addId?this.$toast("商品号不能为空"):""==this.addname?this.$toast("商品名不能为空"):""==this.addinprice?this.$toast("商品进价不能为空"):""==this.addoutprice?this.$toast("商品售价不能为空"):""==this.addnum?this.$toast("商品数量不能为空"):this.axios.get("http://127.0.0.1/list/get",{params:{goodId:this.addId}}).then((t=>{console.log("res:",t),console.log(String(t.data).length);var a=String(t.data).length;0==a?this.fangfa2():this.$toast("该商品已存在，请使用右边的增加方法"),console.log("查找成功")})).catch((t=>{this.$toast("添加商品失败"),console.log("获取数据失败"+t)}))})).catch((()=>{}))},addgoods2(){i.Z.confirm({title:"提示",message:"是否确定增加？"}).then((()=>{""==this.addId?this.$toast("商品号不能为空"):""==this.addnum?this.$toast("商品数量不能为空"):this.axios.get("http://127.0.0.1/list/get",{params:{goodId:this.addId}}).then((t=>{console.log("res:",t);var a=String(t.data).length;if(0==a)this.$toast("该商品不存在，请使用左边的增加方法");else{console.log("num",t.data[0].num);var e=parseInt(t.data[0].num),s=0;s=e+parseInt(this.addnum);var o=t.data[0].inprice;this.fangfa1(s,o),console.log("查找成功")}})).catch((t=>{this.$toast("添加商品失败"),console.log("获取数据失败"+t)}))})).catch((()=>{}))},afterRead(t){t.status="uploading",t.message="上传中...",setTimeout((()=>{t.status="done",t.message="上传成功"}),1e3)},tishi(){i.Z.confirm({title:"提示",message:"是否添加商品数据"}).then((()=>{})).catch((()=>{}))},onConfirm(t,a){this.goodtype=t,this.show=!this.show,this.addId=this.idListtype[a]},onCancel(){this.show=!this.show},showPopup(){this.show=!0},onClickLeft(){this.$router.push({name:"Home"})}}},n=d,l=e(1001),c=(0,l.Z)(n,s,o,!1,null,"7e0bccec",null),r=c.exports}}]);
//# sourceMappingURL=920.fa9ab8e9.js.map